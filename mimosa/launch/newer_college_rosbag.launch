<launch>
  <arg name="bag_name"/>
  <arg name="s" default="0" />
  <arg name="viz" default="false" />

  <node pkg="mimosa" type="mimosa_rosbag" name="mimosa_node" output="screen" clear_params="true" required="true"> # launch-prefix="gdb -ex run --args">
    <remap from="/mimosa_node/imu/manager/imu_in" to="/os_cloud_node/imu" />
    <remap from="/mimosa_node/lidar/manager/lidar_in" to="/os_cloud_node/points" />

    <param name="bag_name" value="$(arg bag_name)"/>
    <param name="s" value="$(arg s)"/>

    <rosparam file="$(find mimosa)/config/newer_college/params.yaml"/>
    <rosparam file="$(find mimosa)/config/newer_college/os_newer_college.json" command="load" ns="lidar/sensor"/>
  </node>

  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find mimosa)/rviz/mimosa.rviz" if="$(arg viz)" />

  <node name="recorder" pkg="rosbag" type="record" args="-O $(find mimosa)/data/mimosa_results.bag /mimosa_node/graph/debug /mimosa_node/graph/odometry" output="screen" />

</launch>
